<div class="sticky top-0 flex h-20 shrink-0 items-center gap-x-4 px-2 shadow-sm sm:gap-x-2 sm:px-1 lg:px-8 z-[1000] bg-rose-400 dark:bg-rose-800">
  <!-- Separator -->
  <div class="h-6 w-px lg:hidden" aria-hidden="true"></div>

  <div class="flex flex-shrink lg:hidden">
    <button
      data-action="slideover#open"
      class="px-2 hover:text-rose-700"
    >
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
      </svg>
    </button>
  </div>

  <div class="flex flex-1 justify-between gap-x-4 items-center lg:gap-x-6">
    <%= render partial: "logo" %>

    <div class="flex">
    <% if current_user %>
      <div class="flex items-center gap-x-4 lg:gap-x-6">
        <%= render "notifications" %>
      </div>

      <!-- Separator -->
      <div class="hidden lg:block lg:h-6 lg:w-px" aria-hidden="true"></div>

      <div class="relative" data-controller="dropdown">
        <button
          role="button"
          aria-expanded="false"
          aria-haspopup="true"
          data-action="click->dropdown#toggle click@window->dropdown#hide"
          class="-m-1.5 flex items-center p-1.5"
          id="user-menu-button"
          >
          <span class="flex items-center gap-1 appearance-none">
            <%= account_avatar current_account, class: "flex-shrink-0 rounded-full h-6 w-6" %>
            <span class="max-w-32 truncate leading-tight"><%= current_account.name %></span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current flex-shrink-0 w-4 h-4"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>
          </span>
        </button>
        <div
          class="lg:absolute lg:right-0 bg-rose-300 dropdown-menu hidden z-20 mt-2 opacity-0"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="user-menu-button"
          data-dropdown-target="menu"
          data-transition-enter="transition ease-out duration-200"
          data-transition-enter-from="opacity-0 translate-y-1"
          data-transition-enter-to="opacity-100 translate-y-0"
          data-transition-leave="transition ease-in duration-150"
          data-transition-leave-from="opacity-100 translate-y-0"
          data-transition-leave-to="opacity-0 translate-y-1"
          tabindex="-1">
          <span>
          <%= link_to current_account.name, current_account, class: 'border-b font-semibold text-base transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          </span>
          <span>
          <%= link_to t(".profile"), edit_user_registration_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          </span>
          <span>
          <%= link_to t(".password"), edit_account_password_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          </span>
          <span>
          <%= link_to t(".connected_accounts"), user_connected_accounts_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' if Devise.omniauth_configs.any? %>
          </span>
          <span>
          <%= link_to t(".billing"), subscriptions_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' if Jumpstart.config.payments_enabled? %>
          </span>
          <span>
          <%= link_to t(".accounts"), accounts_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          </span>
          <%#= link_to t(".api_tokens"), api_tokens_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' if Jumpstart.config.payments_enabled? %>
          <% if Current.other_accounts.any? %>
            <div class="px-6 py-3 text-xs font-bold uppercase border-t">Switch Account</div>
            <% current_user.accounts.order(name: :asc).where.not(id: current_account.id).each do |account| %>
              <%= switch_account_button account, data: { controller: :accounts, action: "ajax:success->accounts#reconnect" }, class: 'w-full text-left transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3 cursor-pointer' %>
            <% end %>
          <% end %>
          <% if current_user.admin? %>
            <div class="px-6 py-3 text-xs font-bold uppercase border-t text-rose-800 dark:text-rose-300"><%= t(".admin") %></div>
            <span>
            <%= link_to t(".dashboard"), admin_root_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } %>
            </span>
            <span>
            <%= link_to 'Sidekiq', admin_sidekiq_web_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } if defined?(::Sidekiq) %>
            </span>
            <span>
            <%= link_to 'GoodJob', good_job_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } if defined?(::GoodJob) %>
            </span>
          <% end %>
          <% if Rails.env.development? %>
            <div class="px-6 py-3 text-xs font-bold uppercase border-t text-rose-800 dark:text-rose-300">Development</div>
            <span>
            <%= link_to 'Jumpstart Config', jumpstart_path(script_name: nil), class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', data: { turbo: false } %>
            </span>
            <span>
            <%= link_to 'Jumpstart Docs', jumpstart.docs_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } %>
            </span>
            <span>
            <%= link_to 'Mailbin', mailbin_path(script_name: nil), class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } %>
            </span>
          <% end %>
          <span>
          <%= button_to t(".sign_out"), destroy_user_session_path, method: :delete, class: 'w-full text-left font-medium cursor-pointer px-6 py-3 border-t transition ease-in-out duration-200 whitespace-nowrap text-rose-800 dark:text-rose-300' %>
          </span>
        </div>
      </div>
    <% end %>
    </div>
  </div>
</div>
