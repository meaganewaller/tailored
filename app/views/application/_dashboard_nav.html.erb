<div class="sticky top-0 flex h-16 shrink-0 items-center gap-x-4 px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8 z-[1000] bg-rose-400">
  <!-- Separator -->
  <div class="h-6 w-px lg:hidden" aria-hidden="true"></div>

  <div class="flex flex-1 gap-x-4 items-center lg:gap-x-6">
    <% if current_user %>
      <form class="relative flex flex-1" action="#" method="GET">
        <label for="search-field" class="sr-only">Search</label>
        <svg class="pointer-events-none absolute inset-y-0 left-0 h-full w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
          <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
        </svg>
        <input id="search-field" class="block h-full w-full py-0 pl-8 pr-0 focus:ring-0 sm:text-sm" placeholder="Search..." type="search" name="search">
      </form>
      <div class="flex items-center gap-x-4 lg:gap-x-6">
        <%= render "notifications" %>
      </div>

      <!-- Separator -->
      <div class="hidden lg:block lg:h-6 lg:w-px" aria-hidden="true"></div>

      <div class="relative" data-controller="dropdown">
        <button
          role="button"
          aria-expanded="false"
          aria-haspopup="true"
          data-action="click->dropdown#toggle click@window->dropdown#hide"
          class="-m-1.5 flex items-center p-1.5"
          id="user-menu-button"
          >
          <span class="flex items-center gap-1 appearance-none">
            <%= account_avatar current_account, class: "flex-shrink-0 rounded-full h-6 w-6" %>
            <span class="max-w-32 truncate leading-tight"><%= current_account.name %></span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current flex-shrink-0 w-4 h-4"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>
          </span>
        </button>
        <div
          class="lg:absolute lg:right-0 dropdown-menu hidden z-20 mt-2"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="user-menu-button"
          data-dropdown-target="menu"
          data-transition-enter="transition ease-out duration-200"
          data-transition-enter-from="opacity-0 translate-y-1"
          data-transition-enter-to="opacity-100 translate-y-0"
          data-transition-leave="transition ease-in duration-150"
          data-transition-leave-from="opacity-100 translate-y-0"
          data-transition-leave-to="opacity-0 translate-y-1"
          tabindex="-1">
          <%= link_to current_account.name, current_account, class: 'border-b font-semibold text-base transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          <%= link_to t(".profile"), edit_user_registration_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          <%= link_to t(".password"), edit_account_password_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          <%= link_to t(".connected_accounts"), user_connected_accounts_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' if Devise.omniauth_configs.any? %>
          <%= link_to t(".billing"), subscriptions_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' if Jumpstart.config.payments_enabled? %>
          <%= link_to t(".accounts"), accounts_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' %>
          <%#= link_to t(".api_tokens"), api_tokens_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3' if Jumpstart.config.payments_enabled? %>
          <% if Current.other_accounts.any? %>
            <div class="px-6 py-3 text-xs font-bold uppercase border-t">Switch Account</div>
            <% current_user.accounts.order(name: :asc).where.not(id: current_account.id).each do |account| %>
              <%= switch_account_button account, data: { controller: :accounts, action: "ajax:success->accounts#reconnect" }, class: 'w-full text-left transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3 cursor-pointer' %>
            <% end %>
          <% end %>
          <% if current_user.admin? %>
            <div class="px-6 py-3 text-xs font-bold uppercase border-t"><%= t(".admin") %></div>
            <%= link_to t(".dashboard"), admin_root_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } %>
            <%= link_to 'Sidekiq', admin_sidekiq_web_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } if defined?(::Sidekiq) %>
            <%= link_to 'GoodJob', good_job_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } if defined?(::GoodJob) %>
          <% end %>
          <% if Rails.env.development? %>
            <div class="px-6 py-3 text-xs font-bold uppercase border-t">Development</div>
            <%= link_to 'Jumpstart Config', jumpstart_path(script_name: nil), class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', data: { turbo: false } %>
            <%= link_to 'Jumpstart Docs', jumpstart.docs_path, class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } %>
            <%= link_to 'Mailbin', mailbin_path(script_name: nil), class: 'transition ease-in-out duration-200 whitespace-nowrap no-underline block px-6 py-3', target: :_blank, data: { turbo: false } %>
          <% end %>
          <%= button_to t(".sign_out"), destroy_user_session_path, method: :delete, class: 'w-full text-left font-medium cursor-pointer px-6 py-3 border-t transition ease-in-out duration-200 whitespace-nowrap' %>
        </div>
      </div>
    <% end %>
  </div>
</div>
