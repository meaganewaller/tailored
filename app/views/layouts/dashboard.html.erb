<!DOCTYPE html>
<html class="<%= class_names("antialiased", "dark": current_user&.dark_theme?) %>" lang="<%= I18n.locale %>">
  <head>
    <title>
      <% if content_for?(:title) %>
        <%= yield :title %> |
      <% end %>
      <%= Jumpstart.config.application_name %>
    </title>

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= viewport_meta_tag %>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <% if current_user&.system_theme? %>
        <script>
          document.documentElement.classList.toggle(
            "dark", window.matchMedia('(prefers-color-scheme: dark)').matches
          )
        </script>
    <% end %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload" %>

    <% turbo_refreshes_with method: :morph, scroll: :reset %>
    <%# Be sure to add your own custom favicons %>
    <%= render "favicons" %>
    <%= render "payments_dependencies" %>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

    <%= yield :head %>
  </head>

  <body data-theme-preference-value="<%= current_user&.theme %>" data-controller="theme sidebar slideover">
    <%= render partial: "layouts/navbar" %>
    <div class="flex">
      <%= render partial: "layouts/sidebar" %>
      <%= render partial: "back_to_top" %>
      <%= render partial: "layouts/slideover" %>

      <main class="w-full lg:w-5/6 p-4 flex-grow">
        <%= yield %>
      </main>
    </div>
  </body>
</html>
