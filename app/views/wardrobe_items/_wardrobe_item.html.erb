<!-- WardrobeItem Item -->
<div id="<%= dom_id wardrobe_item %>" class="relative m-10 flex w-full max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md">
  <%= link_to wardrobe_item, class: "relative mx-3 mt-3 flex h-60 overflow-hidden rounded-xl" do %>
    <% if wardrobe_item.images.any? %>
      <%= image_tag wardrobe_item.images.first, alt: wardrobe_item.name, class: "object-cover" %>
    <% else %>
      <% image_tag "placeholder_image.jpg", alt: "No Image Available", class: "object-cover" %>
    <% end %>
    <span class="absolute top-0 left-0 m-2 rounded-full bg-black px-2 text-center text-sm font-medium text-white"><%= wardrobe_item.category&.name %></span>
  <% end %>

  <div class="mt-4 px-5 pb-5">
    <%= link_to wardrobe_item do %>
      <h5 class="text-base tracking-tight text-slate-900"><%= wardrobe_item.name.presence || "Unnamed Item" %></h5>
    <% end %>

    <div class="mt-2 mb-5 flex items-center justify-between">
      <% if wardrobe_item.colors.any? %>
        <% wardrobe_item.colors.each do |color_info| %>
          <div class="h-4 w-4 rounded-full border" style="background-color: <%= color_info["hex"] %>;" title="Hex: <%= color_info['hex'] %>, Score: <%= (color_info['score'] * 100).round(2) %>%">
            <!-- Accessible tooltip for score -->
            <span class="sr-only"><%= color_info["score"] %></span>
          </div>
        <% end %>
      <% else %>
        <p class="text-gray-500 text-sm"><em>No colors detected</em></p>
      <% end %>
    </div>

    <!-- Additional info -->
    <div class="flex flex-col items-center">
      <p><strong>Season:</strong> <%= wardrobe_item.season.presence || "All Season" %></p>
      <p><strong>Occasions:</strong> <%= wardrobe_item.occasions.any? ? wardrobe_item.occasions.join(", ") : "<em>Not specified</em>".html_safe %></p>
      <p><strong>Cost:</strong> <%= wardrobe_item.cost.present? ? number_to_currency(wardrobe_item.cost) : "<em>Not specified</em>".html_safe %></p>
      <p><strong>Condition:</strong> <%= wardrobe_item.condition.present? ? wardrobe_item.condition.capitalize : "<em>Not specified</em>".html_safe %></p>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="z-[100] flex justify-around py-2">
    <a href="<%= edit_wardrobe_item_path(wardrobe_item) %>">
      Edit
    </a>
    <%= link_to t("delete"), wardrobe_item, data: { turbo_method: :delete, turbo_confirm: t("are_you_sure") } %>
  </div>
</div>
